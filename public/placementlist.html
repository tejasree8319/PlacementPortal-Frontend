<html>
  <head>
    <title>
      Placement List
    </title>
    <script>
       function GetSelectedTextValue(placement) {
        $("#tbodyid").empty();
        var selectedText = placement.options[placement.selectedIndex].innerHTML;
        console.log(selectedText)
        $.ajax({
          type:'get',
          url:'http://localhost:8000/placement/all/'+selectedText,
          dataType:'json',
          success:function(response){
            var placement_HTML=''
            for (i = 0,j=1; i < response.length; i++,j++) {
              var data = response[i];
              placement_HTML+=
                '<tr><td>' +
                j+
                '</td><td>'+
                // data.studentId.studentId +
                // '</td><td>' +
                data.companyId.companyName+
                '</td><td>'+
                data.companyId.companySector+
                '</td><td>'+
                data.jobId.jobPackage+
                '</td><td>'+
                data.jobId.selectedCount
                '</td></tr>';
              //console.log(data.studentId.studentId);
              console.log(data.companyId.companyName);
              console.log(data.companyId.companySector);
              console.log(data.jobId.jobPackage);
              console.log(data.jobId.selectedCount);
            }
             $('#tbodyid').append(placement_HTML);
           
          },
          error: function() {
            alert('Error');
          }
        });
        
        // alert("Selected Text: " + selectedText + " Value: " + selectedValue);
    }
        function showdata() {
        $.ajax({
          type: 'get',
          url: 'http://localhost:8000/placement/all/2019-2020',
          dataType: 'json',
          success: function(response) {
            //alert(response);
            var placement_HTML = '';
            for (i = 0,j=1; i < response.length; i++,j++) {
              var data = response[i];
              placement_HTML +=
                '<tr><td>' +
                j+
                '</td><td>'+
                data.companyId.companyName+
                '</td><td>'+
                data.companyId.companySector+
                '</td><td>'+
                data.jobId.jobPackage+
                '</td><td>'+
                data.jobId.selectedCount
                '</td></tr>';
              //console.log(data.studentId.studentId);
              console.log(data.companyId.companyName);
              console.log(data.companyId.companySector);
              console.log(data.jobId.jobPackage);
              console.log(data.jobId.selectedCount);
            }
            $('#tbodyid').append(placement_HTML);
          },
          error: function() {
            alert('Error');
          }
        });
      
      }
    </script>
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="./css/style.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  </head>
   <body onload="showdata()">
   <nav class="navbar navbar-inverse navbar-fixed-top"> -->
    <div class="container-fluid">
      <div class="navbar-header">
       <!-- <a class="navbar-brand" href="register.html">Logout</a>  -->
       </div> 
      <ul class="nav navbar-nav">
        <li><a href="login.html">Home</a></li>
        <li><a href="register.html">Register</a></li>
        <li><a href="studentlist.html">Students</a></li>
        <li><a href="facultylist.html">Faculty</a></li>
        <li><a href="joblist.html">Jobs</a></li>
        <!-- <li><a href="placementlist.html">View Placements</a></li> -->
       <li>
        <select id="placement" onchange="GetSelectedTextValue(this)">
          <option value="" disabled selected hidden>Placements</option>
          <option value="2019-2020">2019-2020 </option>
          <option value="2018-2019">2018-2019 </option>
          <option value="2017-2018">2017-2018</option>
        
        </select>
      </li>
      <li><a href="companieslist.html">Companies</a></li>
      <li><a href="traininglist.html">Trainings</a></li>
      <li><a href="feedbacklist.html">Feedbacks</a></li>
      <li><a>Logout</a></li>
        <!-- <li class="active"><a href="new_customer.html">New Customer</a></li> -->
      </ul>
    </div>
    <!-- <div class="sidenav">
      <br />
      <br />
      <a> Home</a>
      <a href="studentlist.html">Students</a>
      <a href="facultylist.html">Faculty</a>
      <a href="joblist.html">Jobs</a>
      <a href="placementlist.html">Placements</a>
      <a href="feedback.html">Feedback</a>
      <a href="studentform.html">Student Form</a>
      <a href="facultyform.html">Faculty Form</a>
      <a href="jobform.html">Job Form</a>
      <a>Logout</a>
    </div> -->
  </nav> 
  <table id="placement_details" border="1" class="table table-bordered">
    <br/>
    <br/>
    <h1 style="text-align:center"> Placement List</h1 style="text-align:center">
    <br/>
    <thead>
      <th>S.No</th>
      <!-- <th>Student Id</th> -->
      <th>Company Name</th>
      <th>Sector</th>
      <th>Package</th>
      <th>No.of students selected</th>
    </thead>
    <tbody id="tbodyid"></tbody>
  </table>
</body>
</html>
