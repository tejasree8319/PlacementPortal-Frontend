<html>
  <head>
    <title>
      Login Form
    </title>
    <!-- <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="./css/style.css" /> -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script> 
      $(function(){
        $("#includedContent").load("common.html"); 
      });
    </script> 
    <script>
      $(document).ready(function() {
        $('form').submit(function() {
          var Id = document.getElementById('userId').value;
          var Password = document.getElementById('password').value;
          var formData = {
            userId: Id,
            password: Password
          };
          alert(Id);

          $.ajax({
            type: 'post',
            url: 'http://localhost:8000/login',
            dataType: 'json',
            data: formData,
            success: function(response) {
              console.log(response);
              alert('Local success callback');
              alert(Id);
              //window.location = 'http://localhost:8000/' + response.userType + '/' + response.userId;
              localStorage.setItem('userId', response.userId);
              if(response.userType=='student')
              {
                window.location="/studentform.html"
               }
              else
              {
                window.location='/facultyform.html'
              }
            },
            error: function(jqXHR, status, err) {
              console.log('Error');
              alert('Error');
            },
            complete: function(jqXHR, status) {
              console.log('Complete');
              alert('Local completion callback.');
            }
          });
        });
      });
    </script>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <!-- <a class="navbar-brand" href="register.html">Logout</a> -->
        </div>
        <ul class="nav navbar-nav">
          <li><a> </a></li>
          <li><a> </a></li>
          <li><a> </a></li>
          <li><a href="login.html">Home</a></li>
          <li><a href="register.html">Register</a></li>
          <li><a href="studentlist.html">Students</a></li>
          <li><a href="facultylist.html">Faculty</a></li>
          <li><a href="joblist.html">Jobs</a></li>
          <li><a href="placementlist.html">Placements</a></li>
          <li><a href="feedback.html">Feedback</a></li>
          <li><a href="studentform.html">Student Form</a></li>
          <li><a href="facultyform.html">Faculty Form</a></li>
          <li><a href="jobform.html">Job Form</a></li>
          <li><a>Logout</a></li>

          <!-- <li class="active"><a href="new_customer.html">New Customer</a></li> -->
        </ul>
      </div>
    </nav>
    <div id="includedContent"></div>
    <!-- <div class="sidenav">
      <br />
      <br />
      <a href="login.html">Home</a>
      <a href="register.html">Register</a>
      <a href="studentlist.html">Students</a>
      <a href="facultylist.html">Faculty</a>
      <a href="joblist.html">Jobs</a>
      <a href="placementlist.html">Placements</a>
      <a href="feedback.html">Feedback</a>
      <a href="studentform.html">Student Form</a>
      <a href="facultyform.html">Faculty Form</a>
      <a href="jobform.html">Job Form</a>
      <a>Logout</a>
    </div> -->
    <form action="http://localhost:8000/login" method="POST">
      <br />
      <br />
      <br />
      <br />
      <br />
      <h1 style="text-align:center">Login Form</h1 style="text-align:center">
      <br/>
      <!-- <label for="uId">UserId:</label><br /> -->
      <input
        type="text"
        id="userId"
        name="uId"
        placeholder="UserId"
        required
      /><br />
      <input
        type="password"
        id="password"
        name="password"
        placeholder="Password"
        required
      /><br />
      <br />
      <input type="submit" value="Submit" id="input-submit" />
    </form>
  </body>
</html>
